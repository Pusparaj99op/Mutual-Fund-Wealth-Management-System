<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AI Recommendations - FIMFP">
    <title>Recommendations | FIMFP</title>
    <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üáÆüá≥</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../css/gov-style.css">
    <style>
        .page-header {
            background: linear-gradient(135deg, var(--gov-navy) 0%, var(--gov-navy-dark) 100%);
            color: var(--white);
            padding: 30px 0;
            margin-bottom: 30px
        }

        .page-header::after {
            content: '';
            display: block;
            height: 4px;
            background: linear-gradient(to right, var(--saffron), var(--white), var(--green));
            margin-top: 30px
        }

        .page-title-section {
            display: flex;
            align-items: center;
            gap: 15px
        }

        .page-icon {
            width: 48px;
            height: 48px
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0
        }

        .page-subtitle {
            font-size: 0.95rem;
            opacity: 0.9;
            margin-top: 5px
        }

        .recommend-grid {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 25px;
            margin-bottom: 30px
        }

        .risk-level-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: #fff;
            margin: 0 auto 15px
        }

        .risk-1 {
            background: linear-gradient(135deg, #4CAF50, #81C784)
        }

        .risk-2 {
            background: linear-gradient(135deg, #8BC34A, #AED581)
        }

        .risk-3 {
            background: linear-gradient(135deg, #FF9800, #FFB74D)
        }

        .risk-4 {
            background: linear-gradient(135deg, #FF5722, #FF8A65)
        }

        .risk-5 {
            background: linear-gradient(135deg, #F44336, #E57373)
        }

        .profile-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--gov-navy);
            text-align: center;
            margin-bottom: 15px
        }

        .allocation-bar {
            height: 12px;
            background: var(--gray-200);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0
        }

        .allocation-fill {
            height: 100%;
            background: linear-gradient(to right, var(--gov-navy), var(--saffron));
            border-radius: 6px
        }

        .recommendation-card {
            display: grid;
            grid-template-columns: 50px 1fr 180px;
            gap: 15px;
            padding: 15px;
            background: var(--gray-50);
            border-radius: 8px;
            border: 1px solid var(--gray-200);
            margin-bottom: 12px;
            align-items: center
        }

        .recommendation-card:hover {
            border-color: var(--gov-navy);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08)
        }

        .rank-badge {
            width: 45px;
            height: 45px;
            background: var(--gov-navy);
            color: #fff;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700
        }

        .fund-info h4 {
            font-size: 0.95rem;
            color: var(--gray-800);
            margin: 0 0 5px
        }

        .fund-info p {
            font-size: 0.8rem;
            color: var(--gray-500);
            margin: 0
        }

        .fund-insight {
            font-size: 0.75rem;
            color: var(--green);
            margin-top: 5px
        }

        .fund-metrics {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            text-align: center
        }

        .fund-metric-value {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--gov-navy)
        }

        .fund-metric-label {
            font-size: 0.65rem;
            color: var(--gray-500)
        }
    </style>
</head>

<body>
    <a href="#main-content" class="skip-nav">Skip to main content</a>
    <div class="top-banner"></div>
    <div class="gov-secondary-banner">
        <div class="container">
            <div class="gov-links"><a href="https://india.gov.in" target="_blank">india.gov.in</a><span
                    class="separator">|</span><a href="https://sebi.gov.in" target="_blank">SEBI</a></div>
            <div class="language-switch"><button class="lang-btn active">English</button><button
                    class="lang-btn">‡§π‡§ø‡§Ç‡§¶‡•Ä</button></div>
        </div>
    </div>
    <header class="main-header">
        <div class="container">
            <div class="header-left">
                <div class="emblem"><img src="https://upload.wikimedia.org/wikipedia/commons/5/55/Emblem_of_India.svg"
                        alt="Emblem" width="65" height="75"></div>
                <div class="header-text">
                    <h1 class="portal-title">FIMFP</h1>
                    <p class="portal-subtitle">Federal Indian Mutual Fund Portal</p>
                    <p class="portal-subtitle-hindi">‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∏‡§Ç‡§ò‡•Ä‡§Ø ‡§Æ‡•ç‡§Ø‡•Ç‡§ö‡•Å‡§Ö‡§≤ ‡§´‡§Ç‡§° ‡§™‡•ã‡§∞‡•ç‡§ü‡§≤</p>
                </div>
            </div>
            <div class="header-right">
                <div class="digital-india"><span class="di-text">An Initiative of</span><span class="di-logo">Team
                        CoDevian</span></div>
            </div>
        </div>
    </header>
    <nav class="main-nav">
        <div class="container">
            <ul class="nav-list">
                <li><a href="../index.html" class="nav-link">Home</a></li>
                <li><a href="browse-funds.html" class="nav-link">Browse Funds</a></li>
                <li><a href="ai-analysis.html" class="nav-link">AI Analysis</a></li>
                <li><a href="recommendations.html" class="nav-link active">Recommendations</a></li>
                <li><a href="portfolio.html" class="nav-link">Portfolio</a></li>
                <li><a href="compare.html" class="nav-link">Compare</a></li>
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="advanced-ai.html" class="nav-link">Advanced AI</a></li>
            </ul>
            <div class="nav-auth" id="navAuth"><a href="../login.html" class="btn btn-nav-login"><img
                        src="https://cdn-icons-png.flaticon.com/512/3064/3064197.png" alt="Login"
                        style="width:16px;height:16px">Login</a></div>
        </div>
    </nav>
    <div class="page-header">
        <div class="container">
            <div class="page-title-section"><img src="https://cdn-icons-png.flaticon.com/512/3916/3916610.png"
                    alt="Recommend" class="page-icon">
                <div>
                    <h1 class="page-title">AI Fund Recommendations</h1>
                    <p class="page-subtitle">Personalized fund suggestions based on your risk profile</p>
                </div>
            </div>
        </div>
    </div>
    <main id="main-content">
        <div class="container">
            <div class="recommend-grid">
                <div>
                    <div class="card">
                        <h3 class="card-title"><img src="https://cdn-icons-png.flaticon.com/512/1077/1077114.png"
                                alt="Profile" style="width:20px;height:20px;vertical-align:middle;margin-right:8px">Your
                            Investment Profile</h3>
                        <form id="profileForm">
                            <div class="form-group"><label for="age">Age (Years)</label><input type="number" id="age"
                                    class="form-input" value="35" min="18" max="80"></div>
                            <div class="form-group"><label for="income">Annual Income (‚Çπ Lakhs)</label><input
                                    type="number" id="income" class="form-input" value="10" min="1"></div>
                            <div class="form-group"><label for="horizon">Investment Horizon</label><select id="horizon"
                                    class="form-select">
                                    <option value="1">1 Year</option>
                                    <option value="3">3 Years</option>
                                    <option value="5" selected>5 Years</option>
                                    <option value="10">10+ Years</option>
                                </select></div>
                            <div class="form-group"><label for="lossTolerance">Loss Tolerance</label><select
                                    id="lossTolerance" class="form-select">
                                    <option value="1">Very Low</option>
                                    <option value="2">Low</option>
                                    <option value="3" selected>Moderate</option>
                                    <option value="4">High</option>
                                    <option value="5">Very High</option>
                                </select></div>
                            <div class="form-group"><label for="experience">Experience</label><select id="experience"
                                    class="form-select">
                                    <option value="1">Beginner</option>
                                    <option value="3" selected>Intermediate</option>
                                    <option value="5">Expert</option>
                                </select></div>
                            <div class="form-group"><label for="investment">Investment (‚Çπ)</label><input type="number"
                                    id="investment" class="form-input" value="100000" min="1000"></div>
                            <button type="submit" class="btn btn-primary btn-block"><img
                                    src="https://cdn-icons-png.flaticon.com/512/3916/3916610.png" alt="Get"
                                    style="width:16px;height:16px">Get Recommendations</button>
                        </form>
                    </div>
                    <div class="card" id="riskProfileCard" style="display:none;margin-top:20px">
                        <h3 class="card-title">Your Risk Profile</h3>
                        <div id="riskProfileContent"></div>
                    </div>
                </div>
                <div class="card" id="recommendationsCard">
                    <h3 class="card-title"><img src="https://cdn-icons-png.flaticon.com/512/2247/2247615.png" alt="Top"
                            style="width:20px;height:20px;vertical-align:middle;margin-right:8px">Top Recommended Funds
                    </h3>
                    <div id="recommendationsContent">
                        <div class="empty-state"><img src="https://cdn-icons-png.flaticon.com/512/3916/3916610.png"
                                alt="" style="width:64px;height:64px;opacity:0.5;margin-bottom:15px">
                            <p>Enter your profile to view recommendations</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer class="main-footer">
        <div class="container">
            <div class="footer-bottom">
                <p>¬© 2024 FIMFP | Government of India</p>
            </div>
        </div>
    </footer>
    <script src="../js/page-common.js"></script>
    <script>
        async function pageInit() { document.getElementById('profileForm').addEventListener('submit', async e => { e.preventDefault(); await getRecommendations() }) }
        async function getRecommendations() {
            const d = { age: document.getElementById('age').value, income: document.getElementById('income').value, horizon: document.getElementById('horizon').value, loss_tolerance: document.getElementById('lossTolerance').value, experience: document.getElementById('experience').value, investment: document.getElementById('investment').value, top_n: 10 };
            document.getElementById('recommendationsContent').innerHTML = '<div class="loading"></div>';
            const r = await window.pageCommon.apiPost('/api/recommend', d);
            if (r.success && r.data) { renderRiskProfile(r.data.risk_profile); renderRecommendations(r.data.recommendations) } else { window.pageCommon.showError('recommendationsContent', r.error || 'Failed') }
        }
        function renderRiskProfile(p) {
            if (!p) return; document.getElementById('riskProfileCard').style.display = 'block'; const a = p.recommended_equity_allocation;
            document.getElementById('riskProfileContent').innerHTML = `<div class="risk-level-circle risk-${p.risk_level}">${p.risk_level}</div><div class="profile-name">${p.risk_profile}</div><div style="background:var(--gray-50);padding:15px;border-radius:6px"><p style="font-size:0.85rem">Recommended Equity: <strong>${a[0]}% - ${a[1]}%</strong></p><div class="allocation-bar"><div class="allocation-fill" style="width:${(a[0] + a[1]) / 2}%"></div></div></div>`
        }
        function renderRecommendations(recs) {
            if (!recs || !recs.length) { window.pageCommon.showEmpty('recommendationsContent', 'No recommendations'); return }
            document.getElementById('recommendationsContent').innerHTML = recs.map((r, i) => `<div class="recommendation-card"><div class="rank-badge">${i + 1}</div><div class="fund-info"><h4>${window.pageCommon.truncateText(r.scheme_name, 50)}</h4><p>${r.amc_name} | ${r.category}</p>${r.insights && r.insights[0] ? `<div class="fund-insight"><img src="https://cdn-icons-png.flaticon.com/512/845/845646.png" style="width:12px;height:12px;vertical-align:middle"> ${r.insights[0]}</div>` : ''}</div><div class="fund-metrics"><div><div class="fund-metric-value">${r.rating || '-'}</div><div class="fund-metric-label">Rating</div></div><div><div class="fund-metric-value">${window.pageCommon.formatReturn(r.metrics?.returns?.['1yr'])}</div><div class="fund-metric-label">1Y Return</div></div><div><div class="fund-metric-value">${r.metrics?.risk?.sharpe?.toFixed(2) || '-'}</div><div class="fund-metric-label">Sharpe</div></div><div><div class="fund-metric-value" style="color:var(--saffron)">${r.recommendation_score}</div><div class="fund-metric-label">Score</div></div></div></div>`).join('')
        }
    </script>
</body>

</html>
